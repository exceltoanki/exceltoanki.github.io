(self.webpackChunkexcel_to_anki=self.webpackChunkexcel_to_anki||[]).push([[3938],{3938:(t,n,i)=>{"use strict";i.r(n),i.d(n,{HoSoPageModule:()=>S});var o=i(8583),e=i(665),s=i(7823),c=i(649),a=i(4762),r=i(639),l=i(8194),g=i(3815),h=i(6809);function u(t,n){if(1&t){const t=r.EpF();r.TgZ(0,"div",11),r.TgZ(1,"ion-item"),r.TgZ(2,"ion-label",12),r._uU(3,"T\xean tags:"),r.qZA(),r.TgZ(4,"ion-input",13),r.NdJ("ngModelChange",function(n){return r.CHM(t),r.oxw().tagsinput=n}),r.qZA(),r.qZA(),r.TgZ(5,"ion-button",14),r.NdJ("click",function(){return r.CHM(t),r.oxw().addTags()}),r._uU(6," Th\xeam "),r._UZ(7,"ion-icon",15),r.qZA(),r.TgZ(8,"ion-button",14),r.NdJ("click",function(){return r.CHM(t),r.oxw().dangTaoTags=!1}),r._uU(9," \u0110\xf3ng "),r._UZ(10,"ion-icon",16),r.qZA(),r.qZA()}if(2&t){const t=r.oxw();r.xp6(4),r.Q6J("ngModel",t.tagsinput)}}function d(t,n){if(1&t){const t=r.EpF();r.TgZ(0,"ion-chip",17),r.NdJ("click",function(n){const i=r.CHM(t).$implicit;return r.oxw().filterTagClick(i,n.target)}),r.TgZ(1,"ion-icon",18),r.NdJ("click",function(){const n=r.CHM(t).$implicit;return r.oxw().renameTagCheck(n)}),r.qZA(),r.TgZ(2,"ion-label"),r._uU(3),r.qZA(),r.TgZ(4,"ion-icon",19),r.NdJ("click",function(){const n=r.CHM(t).$implicit;return r.oxw().deleteTag(n)}),r.qZA(),r.qZA()}if(2&t){const t=n.$implicit;r.xp6(3),r.Oqu(t)}}function p(t,n){if(1&t){const t=r.EpF();r.TgZ(0,"ion-chip",21),r.NdJ("click",function(n){const i=r.CHM(t).$implicit;return r.oxw(2).filterTagClick(i,n.target)}),r._uU(1),r._UZ(2,"ion-icon",15),r.TgZ(3,"ion-icon",19),r.NdJ("click",function(n){const i=r.CHM(t).$implicit;return r.oxw(2).deleteTagsCombine(i,n.target)}),r.qZA(),r.qZA()}if(2&t){const t=n.$implicit;r.xp6(1),r.hij(" ",t," ")}}function m(t,n){if(1&t&&(r.TgZ(0,"div",11),r.YNc(1,p,4,1,"ion-chip",20),r.qZA()),2&t){const t=r.oxw();r.xp6(1),r.Q6J("ngForOf",t.filterBigList)}}let f=(()=>{class t{constructor(t,n){this.menuTagsService=t,this.alertController=n,this.dangTaoTags=!1,this.tagsinput="",this.tagsList=[],this.filterByTag=new r.vpe}ngOnInit(){this.tagsList=this.menuTagsService.tagsList,this.filterBigList=this.menuTagsService.filterBigList}addTags(){return(0,a.mG)(this,void 0,void 0,function*(){""!=this.tagsinput&&(yield this.menuTagsService.addTags(this.tagsinput),this.tagsinput="")})}deleteTag(t){this.presentAlert(`B\u1ea1n th\u1ef1c s\u1ef1 mu\u1ed1n x\xf3a tag <b>${t}</b>?\n    <br>- <b>Gi\u1eef trong h\u1ed3 s\u01a1</b>: khi th\xeam l\u1ea1i <b>${t}</b>, h\u1ed3 s\u01a1 s\u1ebd t\u1ef1 c\xf3 tag <b>${t}</b>.\n    <br>- <b>X\xf3a trong c\xe1c h\u1ed3 s\u01a1</b>: t\u1ea5t c\u1ea3 <b>${t}</b> s\u1ebd b\u1ecb x\xf3a kh\u1ecfi h\u1ec7 th\u1ed1ng. (H\u1ed3 s\u01a1 kh\xf4ng m\u1ea5t, ch\u1ec9 m\u1ea5t tag)`,t)}deleteGiuHoSo(t){this.menuTagsService.deleteGiuHoSo(t)}deleteXoaTagHoSo(t){this.menuTagsService.deleteXoaTagHoSo(t)}deleteTagsCombine(t,n){return(0,a.mG)(this,void 0,void 0,function*(){const i=yield this.alertController.create({header:"X\xf3a tags:",message:`X\xf3a <b>${t}</b>?`,buttons:[{text:"H\u1ee7y",role:"cancel"},{text:"X\xf3a",handler:()=>{if("ion-icon"==n.localName){let n=this.filterBigList.indexOf(t);this.filterBigList.splice(n,1),this.menuTagsService.deleteCombineTags(this.filterBigList)}}}]});yield i.present()})}filterTagClick(t,n){"ion-icon"!=n.localName&&this.filterByTag.emit(t)}renameTagCheck(t){return(0,a.mG)(this,void 0,void 0,function*(){console.log(t),(yield this.alertController.create({header:"\u0110\u1ed5i t\xean tag!",inputs:[{name:"newname",type:"text",placeholder:"T\xean m\u1edbi"}],buttons:[{text:"H\u1ee7y",role:"cancel"},{text:"Ok",handler:n=>{this.renameTag(t,n.newname)}}]})).present()})}renameTag(t,n){this.tagsList.delete(t),this.tagsList.add(n),this.filterBigList=this.filterBigList.map((i,o)=>{console.log(i);let e="";return i.split(",").forEach((i,o)=>{i==t?(console.log(i),e=e+(""==e?"":",")+n):e=e+(""==e?"":",")+i}),e}),this.menuTagsService.updateTagsList(),this.menuTagsService.deleteCombineTags(this.filterBigList)}presentAlert(t,n){return(0,a.mG)(this,void 0,void 0,function*(){const i=yield this.alertController.create({header:"X\xf3a tag",message:t,buttons:[{text:"H\u1ee7y",role:"cancel"},{text:"X\xf3a nh\u01b0ng gi\u1eef trong h\u1ed3 s\u01a1",handler:()=>{this.deleteGiuHoSo(n)}},{text:"X\xf3a trong h\u1ed3 s\u01a1",cssClass:"danger",handler:()=>{this.deleteXoaTagHoSo(n)}}]});yield i.present()})}}return t.\u0275fac=function(n){return new(n||t)(r.Y36(h.J),r.Y36(s.Br))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-menu-tags"]],outputs:{filterByTag:"filterByTag"},decls:16,vars:3,consts:[["side","start","menuId","menuFilter","contentId","main"],["color","primary"],["slot","primary","color","secondary"],["shape","round",3,"click"],[1,"hide960"],["slot","end","name","add"],[1,"ion-padding"],["class","taotags",4,"ngIf"],[1,"menutags"],[3,"click",4,"ngFor","ngForOf"],["id","main"],[1,"taotags"],["position","floating"],["clearInput","true",3,"ngModel","ngModelChange"],["size","small","shape","round",3,"click"],["slot","start","name","add"],["slot","start","name","close-circle-outline"],[3,"click"],["name","pricetag-outline","color","primary",3,"click"],["name","close",3,"click"],["size","small","color","success","shape","round",3,"click",4,"ngFor","ngForOf"],["size","small","color","success","shape","round",3,"click"]],template:function(t,n){1&t&&(r.TgZ(0,"ion-menu",0),r.TgZ(1,"ion-header"),r.TgZ(2,"ion-toolbar",1),r.TgZ(3,"ion-title"),r._uU(4,"Tags"),r.qZA(),r.TgZ(5,"ion-buttons",2),r.TgZ(6,"ion-button",3),r.NdJ("click",function(){return n.dangTaoTags=!0}),r.TgZ(7,"span",4),r._uU(8,"T\u1ea1o tags"),r.qZA(),r._UZ(9,"ion-icon",5),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(10,"ion-content",6),r.YNc(11,u,11,1,"div",7),r.TgZ(12,"div",8),r.YNc(13,d,5,1,"ion-chip",9),r.qZA(),r.YNc(14,m,2,1,"div",7),r.qZA(),r.qZA(),r._UZ(15,"ion-router-outlet",10)),2&t&&(r.xp6(11),r.Q6J("ngIf",n.dangTaoTags),r.xp6(2),r.Q6J("ngForOf",n.tagsList),r.xp6(1),r.Q6J("ngIf",n.filterBigList.length>0))},directives:[s.z0,s.Gu,s.sr,s.wd,s.Sm,s.YG,s.gu,s.W2,o.O5,o.sg,s.jP,s.Ie,s.Q$,s.pK,s.j9,e.JJ,e.On,s.hM],styles:[".taotags[_ngcontent-%COMP%]{margin-bottom:1rem}.menutags[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]{padding:3px 6px;font-size:10px;height:20px;margin:5px 3px}.menutags[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{height:10px;margin:0}.menutags[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{line-height:14px}"]}),t})();function T(t,n){if(1&t){const t=r.EpF();r.TgZ(0,"ion-badge",17),r._uU(1),r.TgZ(2,"ion-icon",18),r.NdJ("click",function(){const n=r.CHM(t).$implicit;return r.oxw(2).removeThisTag(n)}),r.qZA(),r.qZA()}if(2&t){const t=n.$implicit;r.xp6(1),r.hij(" ",t," ")}}function Z(t,n){if(1&t){const t=r.EpF();r.TgZ(0,"ion-icon",18),r.NdJ("click",function(){return r.CHM(t),r.oxw(2).removeAllTags()}),r.qZA()}}function C(t,n){if(1&t){const t=r.EpF();r.TgZ(0,"ion-icon",19),r.NdJ("click",function(){return r.CHM(t),r.oxw(2).saveFilterList()}),r.qZA()}}function x(t,n){if(1&t&&(r.TgZ(0,"div",11),r.YNc(1,T,3,1,"ion-badge",12),r.TgZ(2,"ion-badge",13),r.YNc(3,Z,1,0,"ion-icon",14),r.qZA(),r.TgZ(4,"ion-badge",15),r.YNc(5,C,1,0,"ion-icon",16),r.qZA(),r.qZA()),2&t){const t=r.oxw();r.xp6(1),r.Q6J("ngForOf",t.filterList),r.xp6(2),r.Q6J("ngIf",t.filterList.length>1),r.xp6(2),r.Q6J("ngIf",t.filterList.length>1)}}function _(t,n){if(1&t&&(r.TgZ(0,"div",32),r.TgZ(1,"ion-badge",0),r._uU(2),r.qZA(),r.TgZ(3,"ion-badge",13),r._uU(4),r.qZA(),r.qZA()),2&t){const t=r.oxw().$implicit;r.xp6(2),r.hij("",null==t.stats?null:t.stats.sheets,"s"),r.xp6(2),r.hij("",null==t.stats?null:t.stats.notes,"n")}}function b(t,n){1&t&&r._UZ(0,"ion-spinner",33)}function A(t,n){1&t&&r._UZ(0,"ion-icon",34)}function v(t,n){if(1&t){const t=r.EpF();r.TgZ(0,"ion-button",35),r.NdJ("click",function(){r.CHM(t);const n=r.oxw().$implicit;return r.oxw().mogooglesheet(n)}),r._UZ(1,"ion-icon",36),r.TgZ(2,"span"),r._uU(3," Gg Sheet "),r.qZA(),r.qZA()}}function k(t,n){if(1&t){const t=r.EpF();r.TgZ(0,"ion-col",20),r.TgZ(1,"section"),r.TgZ(2,"ion-card",21),r.NdJ("click",function(n){const i=r.CHM(t).$implicit;return r.oxw().goToHoSoDetail(n.target,i)}),r.TgZ(3,"ion-card-header"),r.TgZ(4,"ion-card-title"),r._uU(5),r.qZA(),r.TgZ(6,"ion-card-subtitle"),r._uU(7),r.qZA(),r.YNc(8,_,5,2,"div",22),r.qZA(),r.TgZ(9,"section",23),r.TgZ(10,"ion-button",24),r.NdJ("click",function(){const n=r.CHM(t).$implicit;return r.oxw().chayTaoAnki(n)}),r.YNc(11,b,1,0,"ion-spinner",25),r.YNc(12,A,1,0,"ion-icon",26),r._uU(13," T\u1ea1o anki "),r.qZA(),r.TgZ(14,"ion-button",27),r.NdJ("click",function(){const n=r.CHM(t).$implicit;return r.oxw().copyHoso(n)}),r._UZ(15,"ion-icon",28),r.TgZ(16,"span"),r._uU(17," Sao ch\xe9p "),r.qZA(),r.qZA(),r.YNc(18,v,4,0,"ion-button",29),r.TgZ(19,"ion-button",30),r.NdJ("click",function(){const n=r.CHM(t).$implicit;return r.oxw().xoaHoSo(n)}),r._UZ(20,"ion-icon",31),r.TgZ(21,"span",6),r._uU(22,"X\xf3a"),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA()}if(2&t){const t=n.$implicit;r.xp6(5),r.Oqu(t.name),r.xp6(2),r.hij("",t.description," "),r.xp6(1),r.Q6J("ngIf",t.stats&&(null==t.stats?null:t.stats.sheets)>0),r.xp6(2),r.Q6J("disabled",t.creatingAnki),r.xp6(1),r.Q6J("ngIf",t.creatingAnki),r.xp6(1),r.Q6J("ngIf",!t.creatingAnki),r.xp6(6),r.Q6J("ngIf",t.ggsheeteditlink)}}const M=[{path:"",component:(()=>{class t{constructor(t,n,i,o,s,c,a){this.hosoService=t,this.router=n,this.getexcelService=i,this.toastController=o,this.alertController=s,this.menu=c,this.menuTagsService=a,this.danhsachhoso=[],this.filterList=[],this.searchControl=new e.NI}presentToast(t,n="success"){return(0,a.mG)(this,void 0,void 0,function*(){(yield this.toastController.create({message:t,duration:1e3,color:n})).present()})}ngOnInit(){this.danhsachhoso=this.hosoService.danhsachhoso,this.searchControl.valueChanges.subscribe(t=>{this.setFilteredDSHoSo(t)})}ionViewDidLoad(){}goToHoSoDetail(t,n){t.localName.startsWith("ion-card")&&this.router.navigate(["/ho-so-chi-tiet"],{state:{hoso:n},skipLocationChange:!0})}chayTaoAnki(t){return(0,a.mG)(this,void 0,void 0,function*(){t.creatingAnki=!0,"createok"==(yield this.getexcelService.getGoogleSheet(t))&&this.hosoService.updateHoSo(t)})}copyHoso(t,n="Copy of "){return(0,a.mG)(this,void 0,void 0,function*(){let i=Object.assign({},t);i.name=n+i.name,i.id=null,i.createdAt=null,i.stats={notes:0,sheets:0},(yield this.hosoService.addNewHoSo(i))?this.presentToast("\u0110\xe3 sao ch\xe9p h\u1ed3 s\u01a1 th\xe0nh c\xf4ng."):this.presentToast(`\u0110\xe3 c\xf3 h\u1ed3 s\u01a1 copy c\u1ee7a h\u1ed3 s\u01a1 ${i.name} r\u1ed3i.`,"danger")})}mogooglesheet(t){window.open(t.ggsheeteditlink,"_blank")}xoaHoSo(t){return(0,a.mG)(this,void 0,void 0,function*(){const n=yield this.alertController.create({header:"X\xf3a h\u1ed3 s\u01a1",cssClass:"xoahoso",message:"B\u1ea1n th\u1eadt s\u1ef1 mu\u1ed1n x\xf3a h\u1ed3 s\u01a1 n\xe0y? <br/>\n      M\u1ed9t khi \u0111\xe3 x\xf3a s\u1ebd kh\xf4ng th\u1ec3 kh\xf4i ph\u1ee5c l\u1ea1i.",buttons:[{text:"H\u1ee7y",role:"cancel"},{text:"X\xf3a",role:"delete",cssClass:"ion-color ion-color-danger"}]});yield n.present();const{role:i}=yield n.onDidDismiss();"delete"==i&&(this.hosoService.xoaHoSo(t),this.presentToast("X\xf3a h\u1ed3 s\u01a1 th\xe0nh c\xf4ng","success"))})}taohosomacdinh(){this.copyHoso(this.hosoService.hosomacdinh,"")}setFilteredDSHoSo(t){this.danhsachhoso=this.hosoService.filterHoSo(t)}filterByTag(t){t.split(",").forEach(t=>{this.filterList.includes(t)||(this.filterList.push(t),this.danhsachhoso=this.hosoService.filterHoSoByTag(this.filterList))}),this.menu.close("menuFilter")}removeThisTag(t){const n=this.filterList.indexOf(t);n>-1&&(this.filterList.splice(n,1),this.danhsachhoso=this.hosoService.filterHoSoByTag(this.filterList))}removeAllTags(){this.filterList=[],this.danhsachhoso=this.hosoService.filterHoSo("")}saveFilterList(){this.menuTagsService.filterSaveToStorage(this.filterList)}}return t.\u0275fac=function(n){return new(n||t)(r.Y36(l.y),r.Y36(c.F0),r.Y36(g.v),r.Y36(s.yF),r.Y36(s.Br),r.Y36(s._q),r.Y36(h.J))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-ho-so"]],decls:18,vars:4,consts:[["color","primary"],["slot","start"],["autoHide","false"],["slot","primary","color","secondary"],["class","filterdiv",4,"ngIf"],["shape","round",1,"taohoso",3,"click"],[1,"hide960"],["slot","end","name","add"],[3,"filterByTag"],["placeholder","T\xecm ki\u1ebfm","end","","showCancelButton","focus",3,"debounce","formControl"],["size-md","6","size-xs","12",4,"ngFor","ngForOf"],[1,"filterdiv"],["color","tertiary",4,"ngFor","ngForOf"],["color","danger"],["name","close-circle-outline",3,"click",4,"ngIf"],["color","success"],["name","save-outline",3,"click",4,"ngIf"],["color","tertiary"],["name","close-circle-outline",3,"click"],["name","save-outline",3,"click"],["size-md","6","size-xs","12"],["button","","mode","md",3,"click"],["class","sheetstats",4,"ngIf"],[1,"ion-padding-bottom","ion-padding-start"],["size","small",3,"disabled","click"],["name","crescent",4,"ngIf"],["slot","start","name","caret-forward-circle-outline",4,"ngIf"],["size","small","color","primary",3,"click"],["slot","start","name","duplicate-outline"],["size","small","color","success",3,"click",4,"ngIf"],["size","small","color","danger",3,"click"],["name","trash-outline","slot","start"],[1,"sheetstats"],["name","crescent"],["slot","start","name","caret-forward-circle-outline"],["size","small","color","success",3,"click"],["slot","start","name","logo-google"]],template:function(t,n){1&t&&(r.TgZ(0,"ion-header"),r.TgZ(1,"ion-toolbar",0),r.TgZ(2,"ion-title"),r._uU(3,"H\u1ed3 s\u01a1"),r.qZA(),r.TgZ(4,"ion-buttons",1),r._UZ(5,"ion-menu-button",2),r.qZA(),r.TgZ(6,"ion-buttons",3),r.YNc(7,x,6,3,"div",4),r.TgZ(8,"ion-button",5),r.NdJ("click",function(){return n.taohosomacdinh()}),r.TgZ(9,"span",6),r._uU(10,"T\u1ea1o h\u1ed3 s\u01a1 m\u1eb7c \u0111\u1ecbnh"),r.qZA(),r._UZ(11,"ion-icon",7),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(12,"app-menu-tags",8),r.NdJ("filterByTag",function(t){return n.filterByTag(t)}),r.qZA(),r._UZ(13,"ion-searchbar",9),r.TgZ(14,"ion-content"),r.TgZ(15,"ion-grid"),r.TgZ(16,"ion-row"),r.YNc(17,k,23,7,"ion-col",10),r.qZA(),r.qZA(),r.qZA()),2&t&&(r.xp6(7),r.Q6J("ngIf",n.filterList.length>0),r.xp6(6),r.Q6J("debounce",250)("formControl",n.searchControl),r.xp6(4),r.Q6J("ngForOf",n.danhsachhoso))},directives:[s.Gu,s.sr,s.wd,s.Sm,s.fG,o.O5,s.YG,s.gu,f,s.VI,s.j9,e.JJ,e.oH,s.W2,s.jY,s.Nd,o.sg,s.yp,s.wI,s.PM,s.Zi,s.gZ,s.tO,s.PQ],styles:[".hoai[_ngcontent-%COMP%]{color:#0e03a5}.hoai[_ngcontent-%COMP%]:focus, .hoai[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{color:red}.hoai[_ngcontent-%COMP%]:focus{--color:red}ion-col[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]:hover   ion-card[_ngcontent-%COMP%]{background-color:#e7ecff61}ion-col[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]:hover   .sheetstats[_ngcontent-%COMP%]   ion-badge[_ngcontent-%COMP%]{transform:scale(.9);transition:transform .8s linear;-o-transition:transform .8s linear;-ms-transition:transform .8s linear;-moz-transition:transform .8s linear;-webkit-transition:transform .8s linear}.sheetstats[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px}.sheetstats[_ngcontent-%COMP%]   ion-badge[_ngcontent-%COMP%]{transform:scale(.7);transition:transform .4s linear;-o-transition:transform .4s linear;-ms-transition:transform .4s linear;-moz-transition:transform .4s linear;-webkit-transition:transform .4s linear}@media (max-width: 960px){ion-grid[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{font-size:x-small}ion-grid[_ngcontent-%COMP%]   .hide960[_ngcontent-%COMP%]{display:none}ion-grid[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{transform:scale(.5)}}@media (max-width: 400px){ion-grid[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{font-size:8px}ion-grid[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:none}}.xoahoso[_ngcontent-%COMP%]   .alert-wrapper[_ngcontent-%COMP%]{max-width:60%!important;width:90%}@media (max-width: 600px){.taohoso[_ngcontent-%COMP%]   .hide960[_ngcontent-%COMP%]{display:none}}.spinner-container[_ngcontent-%COMP%]{width:100%;text-align:center;padding:10px}.menu-enabled[_ngcontent-%COMP%]   ion-searchbar[_ngcontent-%COMP%]{display:none}.filterdiv[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-top:1px;cursor:pointer}"]}),t})()}];let O=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[c.Bz.forChild(M)],c.Bz]}),t})(),q=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({}),t})(),y=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[o.ez,e.u5,s.Pc]]}),t})(),S=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[o.ez,e.u5,s.Pc,O,q,e.UX,y]]}),t})()}}]);